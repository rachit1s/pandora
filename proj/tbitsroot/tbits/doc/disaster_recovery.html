<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<style>
img 
{
border:thin;
border-color:#000033;
padding:1px;
margin:2px;
}
li 
{
margin:2px;
}
</style>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>tBits KMS - Disaster Recovery Document</title>
</head>

<body>
<h1>tBits KMS - Disaster Recovery Document </h1>

The following document outlines the procedure to backup and recovery of tBits KMS.

<h2>The things to be backed up</h2>
<p>
tBits stores all the information in database except for attachment files and reports which are stored in file system.
</p>
<p>
So, we need to take care of the database, tBits installation folder and attachment folder.
</p>
<h2>Taking Backup</h2>
<ol>
<li>Stop tBits Server
  <ul>
    <li>Double click the 'Stop tBits Server' link on the desktop. Wait for some time untill the window closes.<br /> 
	If it doesnt, then end the task by click on cross button of the window. <br />
	This is required because tBits might be changing files or database while you are taking the backup.So taking a backup on running system might corrupt the data. <br />
	<br />
    </li>
  </ul>
</li>
<li>Backup Database</li>
	<ul>
		<li>Connect to the database server using the 'SQL Server Management Studio Express' from Start->Program Files. <br />
		  <br />
		</li>
		<li>Open the backup menu as shown in the following picture. <br /> 
			<img src="backupmenu.png" />		<br />
			<br />
		</li>
		<li> This will open the dialog as shown in the figure. <br/>
		<img src="backup-dialog.png"/>		<br />
		<br />
		</li>
	    <li>Click on 'OK' and it will backup the database</li>
	</ul>
<li>Backup 
  Installation
    <ul>
    <li>Copy the folder C:\Program Files\tBits (or any other folder where you installed the tBits) to the backup location. </li>
  </ul>
</li>
<li>Backup attachments
  <ul>
    <li>Copy the folder E:\tbitsattachments (or any other folder where tBits stores the attachments) </li>
  </ul>
</li>
<li>Start tBits Server
  <ul>
    <li>Start tBits Server by clicking on the link available on Desktop icon 'Start tBits Server'</li>
    </ul>
</li>
</ol>

<p>&nbsp;</p>
<h1>Recovery</h1>
<ol>
  <li>Stop tBits Server if running
    <ul>
      <li>Double click the 'Stop tBits Server' link on the desktop. Wait for some time untill the window closes.<br />
If it doesnt, then end the task by click on cross button of the window. <br />
This is required because tBits might be changing files or database while you are taking the backup.So taking a backup on running system might corrupt the data. </li>
    </ul>
  </li>
  <li> Restore database</li>
  <ul>
    <li>Connect to the database server using the 'SQL Server Management Studio Express' from Start-&gt;Program Files. </li>
    <li>Open the restore menu as shown in the following picture and click on database. <br />
      <img src="recovery-menu.png" width="524" height="309" /></li>
    <li>This will open the dialog as shown in the figure.<br /> 
    <img src="recovery-dialog.png" width="704" height="632" /></li>
    <li>Select 'From Device' and Click on elipses &quot;...&quot;</li>
    <li>This will open the 'Specify Backup' dialog as shown in figure<br />
      <img src="specify-backup.png" width="492" height="353" />
        <br />
    Select 'Backup device' from the drop-down and Click 'Add' and select the backdevice where you created the backup.</li>
    <li>Click 'OK' on both the dialogs and go to the 'Restore Diatabase' dialog. Now it will list the snapshots on various timestamp available. <br />
    Select the snapshot from which you want to recover and click 'OK' </li>
  </ul>
  <li> Restore C:\Program Files\tBits</li>
  <li> Restore E:\tbitsattachments</li>
  <li> Start tBits Server</li>
</ol>
<p>&nbsp;</p>
<p><br />
</p>
</body>
</html>
