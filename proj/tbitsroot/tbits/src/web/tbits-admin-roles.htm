<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
    <head>
        <title>
            <%=title%>
        </title>
        <meta name="GENERATOR" content="Microsoft Visual Studio .NET 7.1">
        <meta name="vs_targetSchema" content="http://schemas.microsoft.com/intellisense/ie5">
        <link rel="stylesheet" type="text/css" media="screen" href="<%=nearestPath%>web/css/<%=cssFile%>" />
		<link rel="stylesheet" type="text/css" href="<%=nearestPath%>web/yui/build/fonts/fonts-min.css">
		<link rel="stylesheet" type="text/css" href="<%=nearestPath%>web/yui/build/container/assets/skins/sam/container.css">
		<link rel="stylesheet" type="text/css" href="<%=nearestPath%>web/yui/build/button/assets/skins/sam/button.css"> 
		<link rel="stylesheet" type="text/css" href="<%=nearestPath%>web/yui/build/resize/assets/skins/sam/resize.css" />
		<link rel="stylesheet" type="text/css" href="<%=nearestPath%>web/css/dialogpanel.css" />
		

		<script type="text/javascript" src="<%=nearestPath%>web/yui/build/yahoo/yahoo-min.js"></script>
		<script type="text/javascript" src="<%=nearestPath%>web/yui/build/yuiloader/yuiloader-min.js"></script>		
		<script type="text/javascript" src="<%=nearestPath%>web/yui/build/utilities/utilities.js"></script>
		<script type="text/javascript" src="<%=nearestPath%>web/yui/build/container/container-min.js"></script>
		<script type="text/javascript" src="<%=nearestPath%>web/yui/build/element/element-min.js"></script> 
		<script type="text/javascript" src="<%=nearestPath%>web/yui/build/button/button-min.js"></script> 

        <script language="javascript" src="<%=nearestPath%>web/scripts/admin.js"></script>
        <script language="javascript" src="<%=nearestPath%>web/scripts/common.js"></script>
        <script language="javascript" src="<%=nearestPath%>web/scripts/messages.js"></script>
        <script language="javascript" src="<%=nearestPath%>web/scripts/tt.js"></script>
        <script language="javascript" src="<%=nearestPath%>web/scripts/ac.js"></script>        
		<script language="javascript" src="<%=nearestPath%>web/scripts/dialogpanel.js"></script>
		<script language="javascript" src="<%=nearestPath%>web/scripts/admin-roles.js"></script>
		<script language="javascript" src="<%=nearestPath%>web/yui/build/json/json-min.js"></script>		

		<script language="javascript">
			YAHOO.namespace("transbit.tbits");
			YAHOO.transbit.tbits.contextPath = "<%=nearestPath%>";			
			YAHOO.util.Event.onDOMReady(initRolePanel);      
			
			function test(element, suffix)
			{
			    var id = element.id;
                return (id.lastIndexOf(suffix) == (id.length - suffix.length));
			}
			function select(el)
			{
				var id = el.id;
				var val = document.getElementById(id + "p").value;
                if(val == "deny")
                {
                	onClickImage(id);
                	onClickImage(id);
                }
                else if(val == "empty")
                {
                	onClickImage(id);
                }
			}
			function unselect(el)
			{
				var id = el.id;
				var val = document.getElementById(id + "p").value;
                
				if(val == "grant")
                {
                   onClickImage(id);
                   onClickImage(id);   
                }
                if(val == "deny")
                {
                   onClickImage(id);   
                }
			}
			
			var D = YAHOO.util.Dom;
			
			function toggleAll(id)
			{
				var isChecked = D.get(id).checked;
				D.getElementsBy( function(el) {return test(el, id) }, "img" , "Table4", function(el){ if(isChecked) select(el); else unselect(el)});
			}
			function rowAlternateColors()
			{
				var D = YAHOO.util.Dom;
				var trs = D.get('Table4').children[0].children;
				for(var i=0; i<trs.length; i++)
				{
					if(i%2 != 1)
					{
					    D.setAttribute(trs[i], 'style', 'background-color:#FFF0F0')
					}
				}
			}
			YAHOO.util.Event.onDOMReady(rowAlternateColors);      
			
		</script>
		</head>
    <body onLoad="onLoadBody()" class="yui-skin-sam"> <!-- main-navigator -->
        <FORM name="adminRolesForm" id="adminRolesForm" method="post">
            <input type="hidden" name="nearestPath" id="nearestPath" value="<%=nearestPath%>" />
            <INPUT type="hidden" name="revert" id="revert" value="" />
            <DIV class="hb bhs" style="margin: 0ex 1ex 0.5ex 1ex;"><!-- properties -->
                <DIV class="hsp bhs">
                    <TABLE id="Table3" cellSpacing="3" cellPadding="0" width="95%" vAlign="top">
                        <TR>
                            <TD class="sx" colSpan="3"><SPAN class="b">Roles&nbsp;&nbsp;</SPAN>
                                <SELECT id="roles_list" size="1" name="roles_list" onChange="javascript:onPropertyChangeRoles()" <%=roles_list_disabled%> >
                                    <%=roles_list%>
                                </SELECT>
								<input type='button' id='addRoleId' name='addRole' value='Add Role...' onClick='javascript:openRoleDialog()'></input>							
								<%=deleteRoleButton%>								
                            </TD>						
                        </TR>
                        <TR>
                            <TD class="bos" colSpan="3" height="2"></TD>
                        </TR>
                        <TR valign="top">
                            <TD>
                                <TABLE id="Table4" cellSpacing="3" cellPadding="0" width="95%" vAlign="top">
                                    <TR>
                                        <TD class="sx b">
                                        </TD>
                                        <TD class="sx b"> 
                                        </TD>
                                        <TD class="sx b">
                                        </TD>
                                        <TD class="sx b">
                                        </TD>
                                    </TR>
                                    <TR>
                                        <TD class="sx b">Fields
                                        </TD>
                                        <TD class="sx b"><input type="checkbox" id="_view" onClick="toggleAll('_view')" > View
                                        </TD>
                                        <TD class="sx b"><input type="checkbox" id="_add" onClick="toggleAll('_add')" > Add
                                        </TD>
                                        <TD class="sx b"><input type="checkbox" id="_change" onClick="toggleAll('_change')"> Change
                                        </TD>
                                         <TD class="sx b"><input type="checkbox" id="_email" onClick="toggleAll('_email')"> Send In Email
                                        </TD>
                                    </TR>
                                    
                                    <%=field_permission_list%>
                                </TABLE>
                            </TD>
                            <TD class="bos" width="2"></TD>
                            <TD vAlign="top" width="55%">
                                <TABLE id="Table5" cellSpacing="3" cellPadding="0" width="100%">
                                    <TR>
                                        <TD class="sx b" noWrap colSpan="2">Role Members
                                        </TD>
                                    </TR>
                                    <%=role_members%>
                                </TABLE>
                            </TD>
                        </TR>
                        <TR>
                            <TD class="bos" colSpan="3" height="2"></TD>
                        </TR>
                    </TABLE>
                </DIV>
                <DIV class="arhm">
                    <TABLE id="Table6" cellSpacing="0" cellPadding="0" width="95%">
                        <TR>
						    <TD align="left"><INPUT class="cw b bn sxs lsb" id="Submit1" type="button" value="Save Settings" <%=submit_disabled%> name="Submit1" onClick="javascript:onSubmitRoles()">
                            </TD>
                            <TD align="left"><INPUT class="sx" id="Button2" type="button" value="Revert to Last Saved Settings" name="Button1" onClick="javascript:onRevertLastSavedSettings()" <%=submit_disabled%> >
                            </TD>
                            <TD align="right"><INPUT class="sx" id="Button1" type="button" value="Revert to Default Settings" name="Button1" <%=submit_disabled%> onClick="javascript:onRevertRolePermissions()" >
                            </TD>
                            
                        </TR>
                    </TABLE>
                </DIV>
            </DIV>
            <DIV style="display: none;" id="allTypeFields" name="allTypeFields" width="100px">
                <%=allTypeFields%>
            </DIV>
        </FORM>		
    </body>
</html>
