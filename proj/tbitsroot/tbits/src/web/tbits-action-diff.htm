<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
	<head>
		<title>Conflicting Updates</title>
		<meta name="GENERATOR" content="Microsoft Visual Studio .NET 7.1">
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="vs_targetSchema" content="http://schemas.microsoft.com/intellisense/ie5">
		<link rel="stylesheet" type="text/css" media="screen" href="<%=nearestPath%>web/css/<%=cssFile%>">
		<script language="javascript" src="<%=nearestPath%>web/scripts/add-request.js"></script>
		<script language="javascript" src="<%=nearestPath%>web/scripts/common.js"></script>
		<script type="text/javascript" src="<%=nearestPath%>web/yui/build/yahoo/yahoo-min.js"></script>
		<script language="javascript">
	    			var skipcycle = false;
			YAHOO.namespace("transbit.tbits");
	    	    	YAHOO.transbit.tbits.contextPath = "<%=nearestPath%>";
	    </script>
	</head>
	<body class="bhs" onload="onBodyLoad()">
		<DIV class="m sx">
		    This update includes field changes that conflict with other 
			changes made recently. Select the value you would like to use for each field.
			<LI>
				Click Submit to submit the update to the <%=captions.all.request%> with the values you have 
				selected.
			</LI>
			<LI>
				Click Apply if you want to select values for each field in the dialog and 
				return to the <%=captions.view.update_request%> form for further modifications. 
			</LI>
			<LI>
				Click Cancel to return to the <%=captions.view.update_request%> page without making changes.
			</LI>
		</DIV>
	<div id="actionDiffDiv" class="m hb" name="showDiff" width="100%">
	
	</div>
	</table>
	</body>
	<script language="javascript">
			var arg = window.dialogArguments;
			var isIE = (document.all) ? true : false;
			function onBodyLoad()
			 { 
				   if(isIE == true)
				   {
				       document.getElementById("actionDiffDiv").innerHTML = arg.actionDiff;
				       var height = getAbsoluteTop(document.getElementById("cancel")) + 70;
				       window.dialogWidth = document.getElementById("actionDiffDiv").offsetWidth + 25 + "px";
				       window.dialogHeight = height + "px";
				   }
				   else
				   {
					   mytimer = setTimeout('fcsOnMe()', 50);
					   document.getElementById("actionDiffDiv").innerHTML = this.opener.showDiff;
					   var height = getAbsoluteTop(document.getElementById("cancel")) + 70;
					   //document.getElementById("actionDiffDiv").offsetWidth
					   window.resizeTo(808,300);
					   /* window.resizeTo(document.getElementById("actionDiffDiv").offsetWidth ,
									    height ); */
				   }
			}
			
			function onClickField(fieldName)
			{
			   var name = new String(fieldName);
			   if(name.indexOf("_newch") > 0)
			   {
			      var index = name.indexOf("_newch");
			      var newString = name.substring(0,index);
					if(document.getElementById(name).checked == true)
			      {
			         document.getElementById(newString + "_oldch").checked = false;
			      }
			      else
			      {
			         document.getElementById(newString + "_oldch").checked = true;
			      }
			   } 
			   else
			   {
			      var index = name.indexOf("_oldch");
			      var newString = name.substring(0,index);
			      if(document.getElementById(name).checked == true)
			       {
			          document.getElementById(newString + "_newch").checked = false;
			       }
			      else
			       {
			          document.getElementById(newString + "_newch").checked = true;
			       }
			   }
			}
			
			function onSubmitDiff()
				{
   				  var diffList;
   				  if(isIE == true)
   				  {
   					  diffList = arg.diffList;
   				  }
   				  else
   				  {
   				      diffList = this.opener.diffList;
   				  }
				  var strList = diffList.split("|");
				  var checkedList = new String();
				  
				  for(i=0 ; i <strList.length ; i++)
				    {
						var control = new String(strList[i]);
						var currentControl = document.getElementById(control + "_oldch");
						if(currentControl != null)
						{
						   if(currentControl.checked == true)
						    {
							   checkedList = checkedList + "true" + "|" ;
						    }
						   else
						    {
							    checkedList = checkedList + "false" + "|" ;
						    }
						}
					}
					if(isIE == true)
					{
					   arg.checkedList = checkedList;
					   arg.returnValue = true;
					   arg.result = "submit";
					   window.close();
					}
					else
					{
	                    var strFieldList = this.opener.diffFieldList.split("|");
                        strCheckedList = checkedList.split("|");
		                for(i=0 ; i <strList.length ; i++)
	                     {
		                   var control = new String(strList[i]);
		                   var currentControl = this.opener.document.getElementById(control);
		                   var fldValue = strFieldList[i];
		                   var currentFieldChecked = strCheckedList[i];
		                     if(currentFieldChecked == "true")
		                        {
		                          if( currentControl != null )
                                   {
	                                 if (currentControl.type == "text")
	                                  {
		                                currentControl.value = fldValue;
	                                  }
	                                 else if(currentControl.type == "textarea")
	                                  {
	                                     currentControl.innerText = fldValue;
	                                  }
	                                 else if(currentControl.type == "select-one")
	                                  {
		                                 var len = currentControl.options.length;
		                                 for(var j = 0; j <= len - 1; j++) 
		                                  {
			                                var typeValue = currentControl.options[j].text;
			                                if((typeValue == fldValue))
			                                {
				                              currentControl.options[j].selected = true;
			                                }                     
		                                  }
	                                  }
                                  }
                               }
	                   }
	                   
	                  this.opener.document.getElementById("addRequestForm").submit(); 
	                  window.close();
					}
				}
				
			function onApplyDiff()
			    {
   				  var diffList;
   				  if(isIE == true)
   				  {
   					  diffList = arg.diffList;
   				  }
   				  else
   				  {
   				      diffList = this.opener.diffList;
   				  }
   				  
				  var strList = diffList.split("|");
				  var checkedList = new String();
				  
				  for(i=0 ; i <strList.length ; i++)
				    {
						var control = new String(strList[i]);
						var currentControl = document.getElementById(control + "_oldch");
						if(currentControl != null)
						{
						   if(currentControl.checked == true)
						    {
							   checkedList = checkedList + "true" + "|" ;
						    }
						   else
						    {
							   checkedList = checkedList + "false" + "|" ;
						    }
						}
					}
					if(isIE == true)
					 {
					     arg.checkedList = checkedList;
					     arg.returnValue = true;
					     arg.result = "apply";
					     window.close();
					 }
					 else
					 {
	                     var strFieldList = this.opener.diffFieldList.split("|");
                         strCheckedList = checkedList.split("|");
		                   for(i=0 ; i <strList.length ; i++)
	                        {
		                      var control = new String(strList[i]);
		                      var currentControl = this.opener.document.getElementById(control);
		                      var fldValue = strFieldList[i];
		                      var currentFieldChecked = strCheckedList[i];
		                      if(currentFieldChecked == "true")
		                         {
		                            if( currentControl != null )
                                      {
	                                    if (currentControl.type == "text")
	                                     {
		                                   currentControl.value = fldValue;
	                                     }
	                                    else if(currentControl.type == "textarea")
	                                     {
	                                       currentControl.innerText = fldValue;
	                                     }
	                                    else if(currentControl.type == "select-one")
	                                     {
		                                    var len = currentControl.options.length;
		                                    for(var j = 0; j <= len - 1; j++) 
		                                     {
			                                   var typeValue = currentControl.options[j].text;
			                                    if((typeValue == fldValue))
			                                    {
				                                  currentControl.options[j].selected = true;
			                                    }                     
		                                      }
	                                      }
                                       }
                                 }
	                        }
	                   
	                   window.close();
					 }
				}
				
			function onClickOldAll()
			{
			   /* var checked = document.getElementById("old_all").checked;
			   if(checked == true)
			       document.getElementById("new_all").checked = false; */ 
			   var diffList ;
			   if(isIE == true)
			   {
			       diffList = arg.diffList;
			   }
			   else
			   {
			       diffList = this.opener.diffList;
			   }
			   var strList = diffList.split("|");
			   var checkedList = new String();
				  
				  for(i=0 ; i <strList.length ; i++)
				    {
						var control = new String(strList[i]);
						var currentControl1 = document.getElementById(control + "_oldch");
						var currentControl2 = document.getElementById(control + "_newch");
						if(currentControl1 != null)
						{
						      currentControl1.checked = true;
						      currentControl2.checked = false;
						}
					}
			}
			
			function onClickNewAll()
			{
			   /* var checked = document.getElementById("new_all").checked;
			   if(checked == true)
			       document.getElementById("old_all").checked = false; */
			   if(isIE == true)
			   {
			       diffList = arg.diffList;
			   }
			   else
			   {
			       diffList = this.opener.diffList;
			   }
			   var strList = diffList.split("|");
			   var checkedList = new String();
				  
				  for(i=0 ; i <strList.length ; i++)
				    {
						var control = new String(strList[i]);
						var currentControl1 = document.getElementById(control + "_oldch");
						var currentControl2 = document.getElementById(control + "_newch");
						if(currentControl2 != null)
						{
						      currentControl1.checked = false;
						      currentControl2.checked = true;
						}
					}
			}
			
			function onCancelDiff()
			{
			   window.close();
			}
			
			function getAbsoluteTop(ctrl)
            {
				var eT = 0;
				for(var p=ctrl; p&&p.tagName!='BODY'; p=p.offsetParent)
				{
					eT+=p.offsetTop;
				}
				return eT;
			}
						
			function fcsOnMe()
			{
			   if (!skipcycle)
			     {
			       window.focus();
			     }
			    mytimer = setTimeout('fcsOnMe()', 50);
			}
        
	</script>
</html>
