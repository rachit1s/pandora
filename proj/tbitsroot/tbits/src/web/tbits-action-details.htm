<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="GENERATOR" content="Microsoft Visual Studio .NET 7.1">
        <meta name="vs_targetSchema" content="http://schemas.microsoft.com/intellisense/ie5">
        <title>
            <%=title%>
        </title>
        <link rel="stylesheet" type="text/css" media="screen,print" href="<%=nearestPath%>web/css/<%=cssFile%>"/>

        <!-- Individual YUI CSS files -->
       	<link rel="stylesheet" type="text/css" href="<%=nearestPath%>web/yui/build/fonts/fonts-min.css" />
		<link rel="stylesheet" type="text/css" href="<%=nearestPath%>web/yui/build/assets/skins/sam/skin.css">
		
		<script type="text/javascript">CKEDITOR_BASEPATH='<%=nearestPath%>web/ckeditor/';</script>
		
		<!-- Individual YUI JS files -->
		<script type="text/javascript" src='<%=YUIJSs%>' ></script> 
		
		<!-- tBits js -->
		<script type="text/javascript" src='<%=tbitsJSs%>'></script>
		
         <style type="text/css">
         
         .yui-skin-sam .yui-toolbar-container .yui-toolbar-spellcheck span.yui-toolbar-icon {
			    background-image: url( '<%=nearestPath%>web/images/spellcheck.gif' );
			    background-position: 1px 0px;
			    top: 1px;
			    left: 4px;
			}
			.yui-skin-sam .yui-toolbar-container .yui-toolbar-spellcheck-selected span.yui-toolbar-icon {
			    background-image: url( '<%=nearestPath%>web/images/spellcheck.gif' );
			    background-position: 1px 0px;
			    top: 1px;
			    left: 4px;
			}
			.yui-spellcheck-list {
			    cursor: pointer;
			}
			.yui-skin-sam .yui-editor-panel .yui-spellcheck-list li {
			    padding-left: 5px;
			}			
         
			.filestable 
			{
				margin-left: 18px;
			}
			.downloadbutton
			{
				margin-top: 1px;
				margin-bottom: 2px;
				margin-left: 5px;
			}
		</style>

		
		

		<style type="text/css">
			/* Place the border around the editor*/
			.yui-skin-sam .yui-editor-container{
				border: 1px solid #7B9EBD;
			}

			.yui-skin-sam .yui-toolbar-container .yui-toolbar-subcont {
				border-bottom:1px solid #7B9EBD;
				padding:0 1em 0.35em;
				text-align: center;					
				margin-top: 0.35em;
			}
			
			.yui-editor-container .yui-editor-masked {
				background-color:gray;				
			}
		</style>

		<script language="javascript">
		var requestCaption = "<%=captions.all.camel_case_request%>";
		YAHOO.namespace("transbit.tbits");
		YAHOO.transbit.tbits.contextPath = "<%=nearestPath%>";
			
		var requestUpdateFiles = <%=requestUpdateFiles%> ;
		var Event = YAHOO.util.Event;
		var Dom = YAHOO.util.Dom;
	    	
 		
        function onIframeBodyLoad()
		{ 
    		var output = window.frames["hiddenIFrame"].document.body.innerHTML;
    	
    		if (output == '')
				return;			
				
			if(output.indexOf("true") >= 0)
             {				
				if (draftMode != null && draftMode == 'sync')
				{									
					getDrafts();
					updateParent();
		
					var message = "Draft saved at " + getDate();
					if (draftTimestamp > 0)
	 				 message = "Draft updated at " + getDate();
	 	    
					 var spnMsg = document.getElementById("spnMessage");
					  if (spnMsg == null)
					  {
						alert(message);
					   }
					  else
					  {
						spnMsg.innerHTML = message;
					  }		
				}
				else 
				{
				  var message = "Draft saved at " + getDate();

					 if (draftTimestamp > 0)
	 				message = "Draft updated at " + getDate();
    	
					 var spnMsg = document.getElementById("spnMessage");
					 if (spnMsg == null)
					 {
						alert(message);
					 }
					 else
					{
						spnMsg.innerHTML = message;
					}
				}	
			}	
			else
			{
				if (mode != null && mode == 'sync')
				{
				 alert(output);
                }
                 return; 
			}
			getDrafts();
			updateParent();
		} 
        </script>
    </head>
    <body onload="onLoadActionDetails();" onkeyup="onKeyUpBody(event)"  class=" yui-skin-sam">
        <input type="hidden" id="maxAction" value="<%=maxActionId%>" NAME="maxAction"> 
        <input type="hidden" id="sysPrefix" value="<%=sysPrefix%>" NAME="sysPrefix">
        <input type="hidden" id="requestId" value="<%=requestId%>" NAME="requestId"> 
        <input type="hidden" id="isLocked" value="<%=isLocked%>" NAME="isLocked"> 
        <input type="hidden" id="diff" value="<%=diff%>" name="diff">
        <input type="hidden" id="nearestPath" name="nearestPath" value="<%=nearestPath%>" />
        <input type="hidden" id="singleIEWindow" name="singleIEWindow" value="<%=singleIEWindow%>" />
        <input type="hidden" id="highlight" name="highlight" value="true" />
        <!-- navigation -->
        <div class="bbn" style="width:100%; background-image:url(<%=nearestPath%>web/images/header-sec.gif); background-repeat:repeat-x">
            <table cellpadding="0" cellspacing="0" ID="Table1" style="width:100%; background-image:url(<%=nearestPath%>web/images/header-sec.gif); background-repeat:repeat-x">
                <tbody>
                    <tr><td valign="top""><img src="<%=nearestPath%>web/images/header-first.gif"  border="0" align="top" style="margin:0px; padding:0px; border-width:0px; border-spacing:0px; vertical-align:top;"/></td>
                        <td align="right">
                            <a id='spnSearch' class="sx u cw l b" href="<%=nearestPath%>search/<%=sysPrefix%>" target="<%=target_search%>">
                                        <%=sysName%></a>
                        </td>
						<td>&nbsp;<span id="" class="sx u cw l b"><%=customLink%></span>&nbsp;</td>
                        <td align="right">
                            <div class="m cw sxs">
							<span class="lc sx b cw" align="right"> <%=userLogin%></span><span class="l sx b cw" style="display:<%=display_logout%>"> | <a href="<%=nearestPath%>logout"/>Logout</a></span><br>
                                <%=navigationHeader%>|&nbsp;								
								<span id="normalTitle"  class="sx" onclick="window.open('<%=nearestPath%>add-request/<%=sysPrefix%>');"><a href="javascript:onclick('<%=nearestPath%>add-request/<%=sysPrefix%>');"></a></span>
								<span id="Span2"><a id='spnMyRequests' class="l sx b cw" href="<%=nearestPath%>search/<%=sysPrefix%>/my-requests" target="my_requests"><%=captions.all.my_requests%></a></span>
								|&nbsp;<span id='spnAddRequest' class="b l sx cw" onclick="window.open('<%=nearestPath%>add-request/<%=sysPrefix%>')"><img src="<%=nearestPath%>web/images/newrequest.gif"><%=captions.view.add_request%></span> 
                                |&nbsp;<span id='spnOptions' class="l sx cw b" onclick="javascript:onClickOptions()">Settings</span>&nbsp;<%=adminLink%>
                                |&nbsp;<span class="l cw b" onclick="window.open('<%=nearestPath%>web/tbits-help.htm')"></span><span id="spnHelp" name="spnHelp" class="l sx cw b" onclick="window.open('<%=nearestPath%>web/tbits-help.htm')"> Help </span>&nbsp;
                            </div>
                        </td>
                    </tr>
                </tbody>
          </table>
        </div>
        <div style="display:none" id="BAToolTipDiv"></div>
        <!-- sub-navigation -->
        <div class="bh">
            <table cellpadding="0" cellspacing="0" width="995" ID="Table2">
                <tbody>
                    <tr class="sx">
                        <td align="left">
                            <div class="m">
                          			<%=transferInfo%>
                                  <span>
                                    <%=addAction%>
                                </span>
                                <span>
                                    <%=addSubRequest%>
                                </span>
                                <span id="transfer" style="display: <%=transferDisplay%>"><a class="cb l" href="javascript:transferRequest()"><%=captions.view.transfer_request%></a> </span>
                                <%=actionDetailsHeaderSlot%>
                            </div>
                        </td>
                        <td align="right">
                            <div class="m">
                                <span class="l cb" id='userDraftsInfo' name='userDraftsInfo'>
                                    <%=userDraftsInfo%>
                                </span><span id="expand"><a id='spnExpand' class="l cb" href="javascript:<%=modeFunct%>All();" onmouseover="textMouseOver(event,'<%=mode%> Header/Action Log');" onmouseout="textMouseOut();">
                                        <img src="<%=nearestPath%>web/images/<%=modeFunct%>.gif" class="am"/ onmouseover="textMouseOver(event,'<%=mode%> Header/Action Log');" onmouseout="textMouseOut();">
                                        <%=mode%>
                                        All </a></span>&nbsp;&nbsp;&nbsp; <span id="print"><a class="l cb" href="javascript:window.print();" onmouseover="return makeTrue(domTT_activate(this, event, 'content', '<%=captions.view.print_request_details%>','statusText', '<%=view.print_request_details%>', 'delay', 50, 'closeAction', 'remove'));">
                                        <img src="<%=nearestPath%>web/images/print.gif" class="am"/> Print </a>
                                </span>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!-- look header -->
        <div class="m">
            <table cellpadding="0" cellspacing="0" width="995" ID="Table3">
                <tr valign="top">
                    <%=symbols%>
                    <td align="left">
                        <span class="xl b ww">
                            <%=subjectLine%>
                        </span>
                    </td>
                    <td align="right" style="display:<%=office_id_display%>">
                        <span class="xl b ww ch">
                            [<%=office_id%>]
                        </span>
                    </td>
                </tr>
            </table>
        </div>
        <div class="bhs h" id="updateDiv" name="updateDiv" style="display: <%=updateDivDisplay%>;">
            <%=updateDivContent%>
        </div>
           <script language="javascript">
            var ctrl = document.getElementById("updateDiv");
            if (ctrl != null)
            {
                if (ctrl.style.display != "none")
                    document.getElementById("spnUpdateRequest").innerHTML = "Hide Form";
	        }
        </script>
        <!-- header -->
        <div class="h">
            <!-- header-main -->
            <div class="hsbb bhs">
                <table cellpadding="0" cellspacing="0" width="995" ID="Table4">
                    <tr valign="top">
                        <td align="left">
                            <table class="s" cellpadding="2" cellspacing="1" width="100%" ID="Table5">
                                <tbody>
                                    <tr valign="top" align="left">
                                        <td class="b ch fv" align="right" nowrap="nowrap"><%=assignee_ids_label%>:</td>
                                        <td class="fv" align="left" width="30%"><%=assignee_ids%></td>
                                        <td class="b ch fv" align="right" nowrap="nowrap"><%=category_id_label%>:</td>
                                        <td class="fv" align="left" width="35%"><%=category_id%></td>
                                        <td class="b ch fv" align="right" nowrap="nowrap"><%=due_datetime_label%>:</td>
                                        <td class="fv" align="left" width="35%"><%=due_datetime%></td>
                                    </tr>
                                    <tr>
                                        <td class="b ch fv" align="right" nowrap="nowrap"><%=logger_ids_label%>:</td>
                                        <td class="fv" align="left" width="30%"><%=logger_ids%></td>
                                        <td class="b ch fv" align="right" nowrap="nowrap"><%=request_type_id_label%>:</td>
                                        <td class="fv" align="left" width="35%"><%=request_type_id%></td>
                                        <td class="b ch fv" align="right" nowrap="nowrap"><%=logged_datetime_label%>:</td>
                                        <td class="fv" align="left" width="35%"><%=logged_datetime%></td>
                                        <td>&nbsp;</td><td>&nbsp;</td>
                                    </tr>
                                    <tr>
                                        <td class="b ch fv" align="right" nowrap="nowrap"><%=status_id_label%>:</td>
                                        <td class="fv" align="left" width="30%"><%=status_id%></td>
                                        <td class="b ch fv" align="right" nowrap="nowrap"><%=severity_id_label%>:</td>
                                        <td class="fv" align="left" width="20%"><%=severity_id%></td>
                                        <td class="b ch fv" align="right" nowrap="nowrap"><%=lastupdated_datetime_label%>:</td>
                                        <td class="fv" align="left" width="35%"><%=lastupdated_datetime%></td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                </table>
            </div>
            
            <!-- header-details -->
            <%=extendedFieldsHeader%>
            
            <div class="bh hsbb">
				<div>
					<span onclick="javascript:showHide('filesContainer', 'filesContainerImg', '<%=nearestPath%>web/images/plus.gif', '<%=nearestPath%>web/images/minus.gif');" class="l b s cbk" > 
						<img class="am" src="<%=nearestPath%>web/images/minus.gif" id='filesContainerImg'  style="vertical-align:sub;"/> Files 
					</span>
				</div>
				
				<div id="filesContainer" style="display:;margin-left: 17px">
					
       			</div>
			</div>

            <div id="summContainer" >
            <%=summaryHeader%>
            </div>
           
            <div class="hs"></div>
        </div>
        <!-- header-navigation -->
        <div class="bn dm">
          <div class="dp">
            <table cellpadding="0" cellspacing="0" width="980" ID="Table6">
                <tbody>
                    <tr class="s">
                            <td align='left' class='m'>
                            <%=parent%>
                            <%=siblingRequests%>
                            <%=subRequests%>
                            <%=relatedRequests%>
                            <%=attachmentList%>
                            </td>
                            <td align='right' class='m'>
                            <span id="history">
                                    <%=requestHistory%>
                            </span>
                            </td>
                    </tr>
                </tbody>
            </table>
           </div>
        </div>
        <!-- details -->
        <span id="actionDetails">
            <%=actionDetails%>
        </span>
        <!-- details- -->
    </body>
    <div style="display:none" id="diffSummary" >
         <%=diffSummary%>
    </div>
    <div style="display:none" id="actualSummary" >
         <%=actualSummary%>
    </div>
    <script language="javascript">
        <!-- This is should be before action-details.js -->
        var nearestPath = document.getElementById('nearestPath').value;
    </script>
    <!-- <script type="text/javascript" language="javascript" src="<%=nearestPath%>web/scripts/tt-min.js"></script> -->
    <script language="javascript" src="<%=nearestPath%>web/scripts/action-details.js"></script>
    <script language="javascript" src="<%=nearestPath%>web/scripts/common-min.js"></script>
    <script language="javascript" src="<%=nearestPath%>web/scripts/wtt-min.js"></script>
    <script language="javascript" src="<%=nearestPath%>web/scripts/wac-min.js"></script>
    <script language="javascript" src="<%=nearestPath%>web/scripts/messages-min.js"></script>
    <script language="javascript" src="<%=nearestPath%>web/speller/spellChecker-min.js"></script>
    
    <script language="javascript">
		function replaceSummary()
		{
		  //var sysPrefix = document.getElementById("sysPrefix").value;
		  //var features = "status:no; dialogWidth:650px;resizable:yes";
          //var location = "/search-util/" + sysPrefix + 
          //               "?summaryDiff=openSummaryDiff" + 
          //              "&sysPrefix=" + sysPrefix + 
          //              "&now=" + getCurrentTime();
          //window.summaryDiff = document.getElementById("diffSummary").innerHTML;              
          //var newWindow = window.open(location, "name" , features);
          //newWindow.opener = window;
          var diffSummary = document.getElementById("diffSummary").innerHTML;
          var originalSummary = document.getElementById("actualSummary").innerHTML;
          var flag = document.getElementById("diff").value;
          if( flag == "true")
          {
             document.getElementById("summContainer").innerHTML = diffSummary;
             document.getElementById("diffLabel").innerHTML = "[summary]";
             document.getElementById("diff").value = "false";
          }
		  else
		  {
		     document.getElementById("summContainer").innerHTML = originalSummary;
		     document.getElementById("diffLabel").innerHTML = "[diff to previous]";
             document.getElementById("diff").value = "true"; 
		  }
		}
		
        function openUpdateDiv()
        {
            var ctrl = document.getElementById("updateDiv");
            var isLocked = document.getElementById('isLocked').value;
			if (isLocked == "true")
			{
				 if (ctrl != null)
					{
				       if (ctrl.style.display != "none")
						{
							 ctrl.style.display = "NONE";
							 document.getElementById("spnUpdateRequest").innerHTML = "<%=captions.view.update_request%>";
						}
					   else
						 {
							ctrl.style.display = "BLOCK";
							 document.getElementById("spnUpdateRequest").innerHTML = "Hide Form";
						 }
					}
				return;	
			}			
				
            if (ctrl != null)
            {
                var windowName = "<%=sysPrefix%>";
		        var smartTag = "<%=sysPrefix%>_<%=requestId%>";
		        var singleIEWindow = document.getElementById("singleIEWindow").value;
		        if (singleIEWindow == "false")
		            windowName = smartTag;
		        
                if (ctrl.style.display != "none")
                {
                    ctrl.style.display = "NONE";
		            window.name = windowName;
		            document.getElementById("spnUpdateRequest").innerHTML = "<%=captions.view.update_request%>";
		            cancelRefresher();
                }
                else
                {
                    ctrl.style.display = "BLOCK";
                    document.getElementById("spnUpdateRequest").innerHTML = "Hide Form";
                    scheduleRefresher();
		            window.name = windowName + "_update";
                    try
                    {
                        if (document.getElementById("description"))
                            document.getElementById("description").focus();
                    }
                    catch (e)
                    {
                    }
                }
            }
        }
        YAHOO.util.Event.onDOMReady(displayAttInTable);
    </script>
	
	<table width="100%" class = "bhs results" align="center"> <tr><td align="center"> Copyright &#169; 2009 <a href="http://www.tbitsglobal.com" target="blank">tBits Global Inc.</a> All Rights Reserved. Email : <a href="mailto:info@tbitsglobal.com">info@tbitsglobal.com</a></td> 	  	
</tr> </table>
</html>
